(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{1401:e=>{e.exports={container:"Home_container__d256j",title:"Home_title__hYX6j",noResult:"Home_noResult__BcYaV",listContainer:"Home_listContainer__RTHnA"}},2099:e=>{e.exports={card:"RestaurantCard_card__zO2D1",focused:"RestaurantCard_focused__UlKXe",cardTitle:"RestaurantCard_cardTitle__iaTjY"}},5265:e=>{e.exports={mapContainer:"MapView_mapContainer__JhqLK"}},6760:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(8598)}])},7884:e=>{e.exports={layout:"Layout_layout__oM4MU",mainContent:"Layout_mainContent__ut07Y"}},8598:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__N_SSG:()=>I,default:()=>G});var n=r(7876),a=r(4232),s=r(7328),l=r.n(s),i=r(1772),o=r(1041),c=r(8657),d=r.n(c);let u=()=>{let e=new Date().getFullYear();return(0,n.jsxs)("footer",{className:d().footer,children:[(0,n.jsxs)("div",{className:d().links,children:[(0,n.jsx)("a",{href:"https://github.com/moon-jam/nckufood",target:"_blank",rel:"noopener noreferrer",children:"GitHub Repo"}),(0,n.jsx)("a",{href:"https://docs.google.com/spreadsheets/d/1F3VwyOxpUtaBsHH2KckW2Ce65PybchZEYTiSiyfdYzs/edit?gid=0#gid=0",target:"_blank",rel:"noopener noreferrer",children:"餐廳試算表"})]}),(0,n.jsxs)("div",{className:d().copyright,children:["\xa9 ",e," ",(0,n.jsx)(i.g,{icon:o.GY1})," Moon Jam"]})]})};var h=r(7884),m=r.n(h),x=r(6988);let _=e=>{let{children:t}=e;return(0,n.jsxs)("div",{className:m().layout,children:[(0,n.jsxs)(l(),{children:[(0,n.jsx)("link",{rel:"icon",type:"image/png",href:"/favicon-96x96.png",sizes:"96x96"}),(0,n.jsx)("link",{rel:"icon",type:"image/svg+xml",href:"/favicon.svg"}),(0,n.jsx)("link",{rel:"shortcut icon",href:"/favicon.ico"}),(0,n.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/apple-touch-icon.png"}),(0,n.jsx)("link",{rel:"manifest",href:"/site.webmanifest"}),(0,n.jsx)("title",{children:"成大餐廳隨機選擇器"})]}),(0,n.jsx)(x.GoogleAnalytics,{gaId:"G-N9BTT1B82K"}),(0,n.jsx)("main",{className:m().mainContent,children:t}),(0,n.jsx)(u,{})]})};var p=r(9196),j=r.n(p);let f=e=>{let{restaurants:t,onSearch:r}=e,[s,l]=(0,a.useState)(""),[i,o]=(0,a.useState)(""),[c,d]=(0,a.useState)(0),[u,h]=(0,a.useState)(9999),m=Array.from(new Set(t.map(e=>e.Genre))),x=Array.from(new Set(t.map(e=>e.Location)));return(0,n.jsxs)("div",{className:j().filterContainer,children:[(0,n.jsxs)("div",{className:j().filterItems,children:[(0,n.jsxs)("div",{className:j().filterItem,children:[(0,n.jsx)("label",{children:"類別"}),(0,n.jsxs)("select",{value:s,onChange:e=>l(e.target.value),children:[(0,n.jsx)("option",{value:"",children:"全部類別"}),m.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]}),(0,n.jsxs)("div",{className:j().filterItem,children:[(0,n.jsx)("label",{children:"地點"}),(0,n.jsxs)("select",{value:i,onChange:e=>o(e.target.value),children:[(0,n.jsx)("option",{value:"",children:"全部地點"}),x.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]}),(0,n.jsxs)("div",{className:j().filterItem,children:[(0,n.jsx)("label",{children:"價格下限"}),(0,n.jsx)("input",{type:"number",value:c,onChange:e=>d(Number(e.target.value)),placeholder:"0"})]}),(0,n.jsxs)("div",{className:j().filterItem,children:[(0,n.jsx)("label",{children:"價格上限"}),(0,n.jsx)("input",{type:"number",value:u,onChange:e=>h(Number(e.target.value)),placeholder:"9999"})]})]}),(0,n.jsx)("button",{onClick:()=>{r({genre:s,location:i,minPrice:c,maxPrice:u})},className:j().searchButton,children:"搜尋"})]})};var v=r(8847),g=r.n(v),N=r(5265),C=r.n(N);let k=g()(()=>Promise.all([r.e(562),r.e(805),r.e(943)]).then(r.bind(r,6943)),{loadableGenerated:{webpack:()=>[6943]},ssr:!1}),b=e=>{let{restaurants:t,center:r,focusedRestaurant:a}=e;return(0,n.jsx)("div",{className:C().mapContainer,children:(0,n.jsx)(k,{restaurants:t,center:r,focusedRestaurant:a})})};var y=r(2099),S=r.n(y);let w=e=>{let{restaurant:t,isFocused:r,onFocus:a}=e;return(0,n.jsxs)("div",{className:"".concat(S().card," ").concat(r?S().focused:""),onClick:()=>{r||a(t)},tabIndex:0,children:[(0,n.jsx)("h2",{className:S().cardTitle,children:(0,n.jsx)("a",{href:t.GoogleMapsUrl,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:t.Restaurant})}),(0,n.jsxs)("p",{children:["地點：",t.Location]}),(0,n.jsxs)("p",{children:["類別：",t.Genre]}),(0,n.jsxs)("p",{children:["價格：約 ",t.Price," 元"]})]})};var P=r(1401),R=r.n(P);let F=e=>{let t=e.split(",").map(e=>parseFloat(e.trim()));return[t[0],t[1]]};var I=!0;let G=e=>{let{restaurants:t}=e,[r,s]=(0,a.useState)(t),[l,i]=(0,a.useState)([22.999117933453782,120.21709245159849]),[o,c]=(0,a.useState)(null);return(0,n.jsx)(_,{children:(0,n.jsxs)("div",{className:R().container,children:[(0,n.jsx)("h1",{className:R().title,children:"成大餐廳選隨機擇器"}),(0,n.jsx)(f,{restaurants:t,onSearch:e=>{let r=t.filter(t=>{let r=!e.genre||t.Genre===e.genre,n=!e.location||t.Location===e.location,a=t.Price>=e.minPrice&&t.Price<=e.maxPrice;return r&&n&&a}).slice();for(let e=r.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1));[r[e],r[t]]=[r[t],r[e]]}s(r),c(null)}}),0===r.length&&(0,n.jsx)("p",{className:R().noResult,children:"找不到符合條件的餐廳，請嘗試其他選項。"}),r.length>0&&(0,n.jsx)(b,{restaurants:r,center:l,focusedRestaurant:o}),(0,n.jsx)("div",{className:R().listContainer,children:r.map((e,t)=>(0,n.jsx)(w,{restaurant:e,isFocused:!!o&&e.Restaurant===o.Restaurant,onFocus:e=>{i(F(e.Coordinates)),c(e)}},t))})]})})}},8657:e=>{e.exports={footer:"Footer_footer__yl3k1",links:"Footer_links__Uk3ms"}},9196:e=>{e.exports={filterContainer:"Filter_filterContainer__PrKfS",filterItems:"Filter_filterItems__7hoD4",filterItem:"Filter_filterItem__kiAp6",searchButton:"Filter_searchButton__lgxUx"}}},e=>{var t=t=>e(e.s=t);e.O(0,[725,42,636,593,792],()=>t(6760)),_N_E=e.O()}]);